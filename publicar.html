<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publicar - Sistema de Biblioteca</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px;
        }
        .item-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }
        .item-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 4px;
        }
        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .search-box {
            flex: 1;
            min-width: 200px;
        }
    </style>
<body>
    <nav class="navbar">
        ...existing code...
    </nav>
    <div class="layout">
        <aside class="sidebar">
            <a href="index.html">Biblioteca</a>
            <a href="add-item.html">Adicionar Items</a>
            <a href="add-collection.html">Adicionar Coleccion</a>
            <a href="publicar.html">Publicar</a>
            <a href="control-panel.html">Panel de control</a>
            <a href="configuraciones.html">Configuraciones</a>
            <a href="soporte.html">Soporte</a>
            <a href="#">Salir</a>
        </aside>
        <main>
            <div class="api-container">
                <h1>Publicar</h1>
                <div class="language-selector">
                    <select id="languageSelect">
                        <option value="en">English</option>
                        <option value="es" selected>Español</option>
                        <option value="fr">Français</option>
                        <option value="it">Italiano</option>
                        <option value="pt">Português</option>
                        <option value="uk">Українська</option>
                    </select>
                </div>
                <div class="category-selector">
                    <button class="api-btn" data-category="books">Libros</button>
                    <button class="api-btn" data-category="characters">Personajes</button>
                    <button class="api-btn" data-category="houses">Casas</button>
                    <button class="api-btn" data-category="spells">Hechizos</button>
                </div>
                <div id="apiResults" class="results-grid"></div>
            </div>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const apiResults = document.getElementById('apiResults');
                    const languageSelect = document.getElementById('languageSelect');
                    let currentCategory = '';

                    async function fetchApiData(category, lang = 'es') {
                        try {
                            const response = await fetch(`https://potterapi-fedeperin.vercel.app/${lang}/${category}`);
                            const data = await response.json();
                            displayResults(data);
                        } catch (error) {
                            console.error('Error:', error);
                            apiResults.innerHTML = '<p class="error">Error al cargar los datos</p>';
                        }
                    }

                    function displayResults(data) {
                        apiResults.innerHTML = '';
                        data.forEach(item => {
                            const card = document.createElement('div');
                            card.className = 'api-card';
                            card.innerHTML = `
                                <h3>${item.name || item.title || item.spell}</h3>
                                ${item.image ? `<img src="${item.image}" alt="${item.name || item.title || item.spell}">` : ''}
                                <button class="publish-btn" data-id="${item.id}">Publicar</button>
                            `;
                            apiResults.appendChild(card);
                        });
                    }

                    document.querySelectorAll('.api-btn').forEach(button => {
                        button.addEventListener('click', (e) => {
                            currentCategory = e.target.dataset.category;
                            document.querySelectorAll('.api-btn').forEach(btn => btn.classList.remove('active'));
                            e.target.classList.add('active');
                            fetchApiData(currentCategory, languageSelect.value);
                        });
                    });

                    languageSelect.addEventListener('change', () => {
                        if (currentCategory) {
                            fetchApiData(currentCategory, languageSelect.value);
                        }
                    });
                });
            </script>
        </main>
    </div>
</body>
</html>
